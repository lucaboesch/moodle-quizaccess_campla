define("quizaccess_campla/modalforms",["exports","core_form/modalform","core/ajax","core/toast","core/str","core/notification"],(function(_exports,_modalform,_ajax,_toast,_str,_notification){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.modalForm=void 0,_modalform=_interopRequireDefault(_modalform),_ajax=_interopRequireDefault(_ajax),_notification=_interopRequireDefault(_notification);const addNotification=(msg,type)=>{(0,_toast.add)(msg,{type:type})};(()=>{let injected=!1;return function(){if(injected||document.getElementById("campla-toast-zindex-css"))return void(injected=!0);const style=document.createElement("style");style.id="campla-toast-zindex-css",style.textContent="\n            .toast-wrapper, .toast-container {\n                z-index: 2000 !important; /* above modal/backdrop */\n            }\n            .toast { pointer-events: auto; }\n        ",document.head.appendChild(style),injected=!0}})()();_exports.modalForm=function(linkSelector,formClass,title){var _args$hidebuttons,_args$hidebuttons2;let args=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{...args,hidebuttons:null!==(_args$hidebuttons=args.hidebuttons)&&void 0!==_args$hidebuttons?_args$hidebuttons:1};args.hidebuttons=null!==(_args$hidebuttons2=args.hidebuttons)&&void 0!==_args$hidebuttons2?_args$hidebuttons2:1;const link=document.querySelector(linkSelector);link&&link.addEventListener("click",(async e=>{e.preventDefault();const form=new _modalform.default({formClass:formClass,args:args,modalConfig:{title:title},saveButtonText:(0,_str.getString)("sendtocampla","quizaccess_campla"),returnFocus:e.currentTarget});form.addEventListener(form.events.FORM_SUBMITTED,(e=>{const response=e.detail,type=200==response.status?"success":"danger";addNotification(response.message,type)})),form.addEventListener(form.events.ERROR,(e=>addNotification("Oopsie - "+e.detail.message))),form.show();try{const[request]=await _ajax.default.call([{methodname:"quizaccess_campla_handle_jwttoken_request",args:{}}]),resp=await request;let toastType;console.log("JWT token response:",resp),toastType=200===resp.status?"success":401===resp.status||412===resp.status?"warning":"danger",addNotification(resp.message,toastType)}catch(ex){_notification.default.exception(ex)}}))}}));

//# sourceMappingURL=modalforms.min.js.map